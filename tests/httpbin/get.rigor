name: Get
format: "1.0"
domain: https://httpbin.org
tags:
  - working

steps:

  - description: Get call with no parameters

    request:
        path: /get

    validate:
      - expect: {}
        actual: '{response.args}'
      - expect: "*/*"
        actual: '{response.headers.Accept}'
      - expect: close
        actual: '{response.headers.Connection}'
      - expect: https://httpbin.org/get
        actual: '{response.url}'

  - description: Get and validate using transform

    request:
        path: /get
        params:
            one: 1
            two: 2

    transform: >
        {{
            host: headers.Host,
            keys: reverse(sort(keys(args)))
        }}

    validate:
      - actual: '{transform}'
        expect:
            host: httpbin.org
            keys:
                - two
                - one
