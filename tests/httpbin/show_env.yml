name: "Show Environment Get"
format: "1.0"
domain: https://httpbin.org
tags:
  - working

scenarios:

  - start: 1
    adder: 2
    check: 3
    final: 5


steps:

  - description: Pass the show_env flag, get it back and add a value to it
    request:
        path: /get
        params:
            show_env: ${scenario.start}
    extract:
        check: ${response['args.show_env']} + ${scenario.adder}
    validate:
      - "'${response.url}' == 'https://httpbin.org/get?show_env=${scenario.start}'"
      - ${response["args.show_env"]} == ${scenario.start}
      - ${extract.check} == ${scenario.check}

  - description: Pass the show_env flag from previous case.
    request:
        path: /get
        params:
            show_env: ${extract.check}
    extract:
        final: ${response["args.show_env"]} + ${scenario.adder}
    validate:
      - "'${response.url}' == 'https://httpbin.org/get?show_env=${extract.check}'"
      - ${response["args.show_env"]} == ${extract.check}
      - ${extract.final} == ${scenario.final}
