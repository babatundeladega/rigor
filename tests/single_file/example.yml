name: "Create Classifications"
format: "1.0"

scenarios:

  - hgvs_g: NC_000007.13:g.140453136A>T
    title: NM_004333.4(BRAF):c.1799T>A (p.Val600Glu)

headers:

    Authorization: Token ${global.auth_token}
    Content-Type: application/json

steps:

  - description: Create data set for scenario.

    request:
        url: /curation/data_sets/
        method: POST
        body:
            name: ${scenario.uuid}
            full_name: ${scenario.uuid}
            default: false

    extract:
        data_set: ${response.name}

    validate:
      - scenario.uuid == response.name
      - scenario.uuid == response.full_name
      - False == response.default

  - description: Create classification.

    request:
        url: /curation/classification/
        method: POST
        body:
            data_set: ${data_set}
            hgvs_g: ${scenario.hgvs_g}

    extract:
        classification_uuid: ${response.uuid}

    validate:
      - scenario.title == response.title
      - data_set == response.data_set

        # todo: call annotation exists that succeeds
        # todo: call classification get that succeeds
        # todo: call classification match that succeeds
        # todo: call classification that fails
        # todo: delete classification
        # todo: delete data_set

